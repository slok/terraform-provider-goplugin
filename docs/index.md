---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "goplugin Provider"
subcategory: ""
description: |-
  A Terraform provider to create terraform providers, but easier and faster!
  Terraform go plugin provider is a Terraform provider that will let you execute Go plugins (using yaegi https://github.com/traefik/yaegi) in terraform by implementing a very simple and small Go API.
  Check all full documentation on the repository readme https://github.com/slok/terraform-provider-goplugin.Check the examples https://github.com/slok/terraform-provider-goplugin/tree/main/examples to see how to develop your own plugins.Check Go v1 lib https://pkg.go.dev/github.com/slok/terraform-provider-goplugin/pkg/api/v1.
---

# goplugin Provider

A Terraform provider to create terraform providers, but easier and faster!

Terraform go plugin provider is a Terraform provider that will let you execute Go plugins (using [yaegi](https://github.com/traefik/yaegi)) in terraform by implementing a very simple and small Go API.

- Check all full documentation on the repository [readme](https://github.com/slok/terraform-provider-goplugin).
- Check the [examples](https://github.com/slok/terraform-provider-goplugin/tree/main/examples) to see how to develop your own plugins.
- Check [Go v1 lib](https://pkg.go.dev/github.com/slok/terraform-provider-goplugin/pkg/api/v1).

## Example Usage

```terraform
terraform {
  required_providers {
    goplugin = {
      source = "slok/goplugin"
    }
  }
}

// Load all required plugins on the provider.
provider "goplugin" {
  data_source_plugins_v1 = {
    "os_file" : {
      source_code   = { dir = "../os_file/plugins/resource_os_file" }
      configuration = jsonencode({})
    }
  }

  resource_plugins_v1 = {
    "os_file" : {
      source_code   = { dir = "../os_file/plugins/resource_os_file" }
      configuration = jsonencode({})
    }

    "github_gist" : {
      source_code = {
        git = {
          url = "https://github.com/slok/terraform-provider-goplugin"
          dir = "/examples/github_gist/plugins/resource_gist"
        }
      }
      configuration = jsonencode({
        // TF_GITHUB_TOKEN loaded from env var.
        api_url = "https://api.github.com"
      })
    }
  }
}

locals {
  files = {
    "tf-test1.txt" : "test-1"
    "tf-test2.txt" : "test-2"
    "tf-test3.txt" : "test-3"
  }
}

// Use the plugins.
resource "goplugin_plugin_v1" "os_file_test" {
  for_each = local.files

  plugin_id = "os_file"
  attributes = jsonencode({
    path    = "/tmp/${each.key}"
    content = each.value
    mode    = 644
  })
}

resource "goplugin_plugin_v1" "github_gist_test" {
  for_each = local.files

  plugin_id = "github_gist"
  attributes = jsonencode({
    description = "Managed by terraform."
    public      = true
    files       = { "${each.key}" : each.value }
  })
}

data "goplugin_plugin_v1" "os_file_test" {
  for_each = goplugin_plugin_v1.os_file_test

  plugin_id = "os_file"
  attributes = jsonencode({
    path = jsondecode(each.value.attributes).path
  })
}

output "test" {
  value = { for k, v in data.goplugin_plugin_v1.os_file_test : k => jsondecode(v.result) }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `data_source_plugins_v1` (Attributes Map) The Block of data source plugins using v1 API that will be loaded by the provider. (see [below for nested schema](#nestedatt--data_source_plugins_v1))
- `resource_plugins_v1` (Attributes Map) The Block of resource plugins using v1 API that will be loaded by the provider. (see [below for nested schema](#nestedatt--resource_plugins_v1))

<a id="nestedatt--data_source_plugins_v1"></a>
### Nested Schema for `data_source_plugins_v1`

Required:

- `configuration` (String, Sensitive) A JSON string object with the properties that will be passed to the plugin creation/initialization, the plugin is responsible of knowing how to load and use these properties (e.g: API tokens).
- `source_code` (Attributes) Configuration regarding where the plugin code will be loaded from.
		The plugin must be a valid go module (`go.mod`) and be available in the root this module.
		Only one of the source code retrieval methods must be used. (see [below for nested schema](#nestedatt--data_source_plugins_v1--source_code))

Optional:

- `factory_name` (String) The name of the plugin factory (in the source code) that will be used to make instances of the plugin, `NewDataSourcePlugin` by default, specially helpful when a package has multiple plugins inside the same package so it can reuse parts of the code between all the plugins.

<a id="nestedatt--data_source_plugins_v1--source_code"></a>
### Nested Schema for `data_source_plugins_v1.source_code`

Optional:

- `dir` (String) Directory where the plugin go module root is. It will load all files including vendor directory, factories must be at the module root level, however it can have subpacakges.
- `git` (Attributes) Git repository to get the plugin source data from. (see [below for nested schema](#nestedatt--data_source_plugins_v1--source_code--git))

<a id="nestedatt--data_source_plugins_v1--source_code--git"></a>
### Nested Schema for `data_source_plugins_v1.source_code.git`

Required:

- `url` (String) URL of the repository.

Optional:

- `auth` (Attributes) Optional git authentication, if block exists it will enable (and also try loading env vars), if missing all auth will be disabled (not loading env vars). (see [below for nested schema](#nestedatt--data_source_plugins_v1--source_code--git--auth))
- `dir` (String) Absolute directory from the root where the plugin go module is in the repository. It works the same way the `dir` source code does, supports subpackages, vendor dir...
- `ref` (String) Reference of the the repository, only Branch and tags are supported.

<a id="nestedatt--data_source_plugins_v1--source_code--git--auth"></a>
### Nested Schema for `data_source_plugins_v1.source_code.git.ref`

Optional:

- `password` (String) The password of the basic auth, if not set it will fallback to `GOPLUGIN_GIT_PASSWORD` env var (Note: Github PATs can be used as passwords).
- `username` (String) The username of the basic auth, if not set it will fallback to `GOPLUGIN_GIT_USERNAME` env var (Note: Github PATs don't need username).





<a id="nestedatt--resource_plugins_v1"></a>
### Nested Schema for `resource_plugins_v1`

Required:

- `configuration` (String, Sensitive) A JSON string object with the properties that will be passed to the plugin creation/initialization, the plugin is responsible of knowing how to load and use these properties (e.g: API tokens).
- `source_code` (Attributes) Configuration regarding where the plugin code will be loaded from.
		The plugin must be a valid go module (`go.mod`) and be available in the root this module.
		Only one of the source code retrieval methods must be used. (see [below for nested schema](#nestedatt--resource_plugins_v1--source_code))

Optional:

- `factory_name` (String) The name of the plugin factory (in the source code) that will be used to make instances of the plugin, `NewResourcePlugin` by default, specially helpful when a package has multiple plugins inside the same package so it can reuse parts of the code between all the plugins.

<a id="nestedatt--resource_plugins_v1--source_code"></a>
### Nested Schema for `resource_plugins_v1.source_code`

Optional:

- `dir` (String) Directory where the plugin go module root is. It will load all files including vendor directory, factories must be at the module root level, however it can have subpacakges.
- `git` (Attributes) Git repository to get the plugin source data from. (see [below for nested schema](#nestedatt--resource_plugins_v1--source_code--git))

<a id="nestedatt--resource_plugins_v1--source_code--git"></a>
### Nested Schema for `resource_plugins_v1.source_code.git`

Required:

- `url` (String) URL of the repository.

Optional:

- `auth` (Attributes) Optional git authentication, if block exists it will enable (and also try loading env vars), if missing all auth will be disabled (not loading env vars). (see [below for nested schema](#nestedatt--resource_plugins_v1--source_code--git--auth))
- `dir` (String) Absolute directory from the root where the plugin go module is in the repository. It works the same way the `dir` source code does, supports subpackages, vendor dir...
- `ref` (String) Reference of the the repository, only Branch and tags are supported.

<a id="nestedatt--resource_plugins_v1--source_code--git--auth"></a>
### Nested Schema for `resource_plugins_v1.source_code.git.ref`

Optional:

- `password` (String) The password of the basic auth, if not set it will fallback to `GOPLUGIN_GIT_PASSWORD` env var (Note: Github PATs can be used as passwords).
- `username` (String) The username of the basic auth, if not set it will fallback to `GOPLUGIN_GIT_USERNAME` env var (Note: Github PATs don't need username).
